<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="CyberPuzzle Puzzle 1: Message in a Bottle - Decrypt the secret message">
    <meta name="theme-color" content="#e94560">
    <title>Puzzle 1: Message in a Bottle | CyberPuzzle.Fun</title>
    
    <!-- Preconnect for performance -->
    <link rel="preconnect" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://code.jquery.com">
    
    <link rel="stylesheet" href="../style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
</head>

<body>
    <div class="main_container">
        <header class="header">
            <div class="logo">
                <a href="../index.html" aria-label="Back to Home">
                    <img src="../puzzle1/assets/img/CyberPuzzle.Fun.png" alt="Logo" class="img-fluid" loading="eager">
                </a>
            </div>
            <div class="clearfix"></div>
        </header>

        <h1>Puzzle 1: Message in a Bottle</h1>
        <section class="puzzle1">
            <div id="outerContainer">
                <div class="container">
                    <p class="typing" role="status" aria-live="polite">
                        Chief: "Hello Agent - I'm glad you're there - we need your help. We have an active investigation
                        underway and we need you to make contact with a potential intelligence asset.
                        We don't have a name - all we have is an address and the <b>clue</b> "message in a bottle". We
                        don't know what it means. It could be a trap, but we'd still like make contact, if we can. The
                        information this contact can provide could be explosive. Will you accept this mission, Agent?"
                    </p>

                    <div class="hiders" aria-hidden="true">
                        <p>&nbsp;</p>
                        <p>&nbsp;</p>
                        <p>&nbsp;</p>
                        <p>&nbsp;</p>
                        <p>&nbsp;</p>
                    </div>
                </div>
                <br><br><br><br><br>
                <div class="yesno">
                    <button id="mybutton" class="btn-pulse glow-effect" onclick="acceptMission()">✓ Yes, Accept Mission</button>
                    <button id="mybutton2" onclick="declineMission()">✗ No, Decline</button>
                </div>
            </div>
        </section>

        <br>
        <footer>
            <div>
                <h3>Richard Dobson - USQ - U1011744</h3>
            </div>
        </footer>

        <div>
            <p id="copyright"><small>Copyright &copy; 2023. All Rights Reserved.</small></p>
        </div>
    </div>

    <!-- Skip animation button -->
    <button class="skip-animation" onclick="skipAnimation()" title="Skip typing animation">⏭ Skip</button>

    <!-- Scripts -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js" 
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" 
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
        crossorigin="anonymous"></script>
    <script src="../puzzle1/dist/js/game-utils.js"></script>
    <script>
        // Optimized animation with performance considerations
        $(document).ready(function () {
            // Reduced delay from 9000ms to 6000ms for better UX
            const fadeInDelay = 6000;
            const fadeInDuration = 1000;
            
            $("#mybutton").hide().delay(fadeInDelay).fadeIn(fadeInDuration);
            $("#mybutton2").hide().delay(fadeInDelay).fadeIn(fadeInDuration);
            
            // Initialize hints after a delay
            setTimeout(() => {
                if (window.HintSystem) {
                    HintSystem.scheduleHints('puzzle1');
                }
            }, fadeInDelay + 1000);
        });
        
        function acceptMission() {
            if (window.GameState) {
                GameState.saveProgress('puzzle1');
            }
            window.location.href = './puzzle1a.html';
        }
        
        function declineMission() {
            if (window.Feedback) {
                Feedback.showError('Mission declined. The agency is disappointed, Agent.');
            } else {
                alert("Mission Failed!");
            }
            // Add a retry option
            setTimeout(() => {
                if (confirm('Would you like to reconsider and accept the mission?')) {
                    acceptMission();
                }
            }, 1000);
        }
        
        function skipAnimation() {
            $(".hiders").hide();
            $("#mybutton, #mybutton2").stop(true, true).show();
            $(".skip-animation").hide();
        }
    </script>
</body>

</html>